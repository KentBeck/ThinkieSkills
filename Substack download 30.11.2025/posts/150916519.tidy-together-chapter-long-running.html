<blockquote><p>I published the first half of this a month ago. Finally finished it. The social media diet seems to be working! Now to figure out what to write next…</p></blockquote><h2><strong>Mixing Design &amp; Features—Experiment, Initiate, Sustain, Abandon, &amp; Finish</strong></h2><p>In <em>Tidy First? </em>we talked a lot about the timing of tidying. We had the "tidy first" flow, where design happened just before the implementation of a new feature. We had the "tidy after" flow, where design happened just after the annoyingly difficult implementation of a feature. Finally we had the rare "tidy because" flow, where design happened whenever because of curiosity or obsession or foresight.</p><p>When we move up to tidying together, we are faced with a more challenging, more ambiguous decision on timing. Here are some of the constraits:</p><ul><li><p>Design too soon &amp; we risk wasting time on speculation along with the degradation of net present value because of the features we delay.</p></li><li><p>Design too late &amp; we risk taking too long to implement the features relying on the design change.</p></li><li><p>Design too much &amp; the we risk losing the folks on the team that just want to implement features.</p></li><li><p>Design too little &amp; we degrade the optionality of the software.</p></li></ul><p>In addition, tidying together takes longer. The kinds of design changes we make when tidying together take long enough that we have to interlace design investment &amp; feature investment. We can’t stop feature development for a noticeable period without damaging our relationship with customers &amp; business sponsors. We have to find a way to play the cymbals <em>&amp; </em>the drums.</p><h2><strong>The S Curve</strong></h2><p>If a design change can happen without disrupting the flow of features, fine, do it. When a design change takes days or weeks or months, then you have a trickier technical &amp; social challenge.</p><div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!Lbb1!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!Lbb1!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 424w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 848w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 1272w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/b07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png" width="1456" height="990" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:990,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1376942,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" title="" srcset="https://substackcdn.com/image/fetch/$s_!Lbb1!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 424w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 848w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 1272w, https://substackcdn.com/image/fetch/$s_!Lbb1!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb07fbb71-ff3c-43d1-b4e5-52ff5b652ab0_1570x1068.png 1456w" sizes="100vw" fetchpriority="high"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></button></div></div></div></a></figure></div><p>How would you like teammates to make a design change? That’s (roughly) what you should do for them. If the change affects someone substantially &amp; immediately, invite them to be part of the change. If the change will affect them in the future, inform them.</p><p>Empirical software design doesn’t rely on unanimity. Everyone doesn’t, can’t, believe the same things or see things exactly the same way. We strive for coherence instead. While everyone has their own perspective on the design, we exert consistent effort to bring those perspectives together.</p><p>I’ll break this problem into 5 phases:</p><ul><li><p>Experimenting—how do we validate a design change before committing to it?</p></li><li><p>Initiating—how do we start a design change?</p></li><li><p>Sustaining—how do we continue making a design change while continuing to deliver features?</p></li><li><p>Finishing—how do we complete a design change once most of the value has been wrung out of it?</p></li><li><p>Abandoning—how do we responsibly abandon a design change?</p></li></ul><h2><strong>Experimenting</strong></h2><p>The is <em>Empirical </em>software design, after all, so we begin by experimenting. You think the code should be arranged like <em>this </em>instead of <em>that</em>? Rearrange a bit of the code &amp; see. Bonus points for doing it in a pair or a group. Extra bonus points for putting a time limit on the session.</p><p>An experiment should clarify whether the code will end up better after the change. If it’s still not clear, toss it &amp; start over.</p><p>I say, "...not clear," like that’s going to be universally shared. It won’t. Some folks will want to move in a new direction. Some won’t care. Others will oppose the change. That’s the nature of working as a team. How y’all resolve these conflicts predicts your success together.</p><p>Emprical software designers operate on evidence, not speculation. You experiment on speculation but don’t get attached. And software design being a, you guessed it, exercise in human relationships, you pay attention to relationships as you experiment. Two people disagree violently about direction? Have them experiment together, if they can stand it. That much energy should be put to good use.</p><p>One outcome of an experiment is that it is so successful &amp; so much easier than you expected that you’re done already. Hooray! Aren’t you glad you didn’t invest more time in arguments. Another is that after an hour with each approach, one is clearly superior. Or both parties feel heard &amp; they defer the change.</p><h2><strong>Initiating</strong></h2><p>There’s always a long list of things about the structure of the system that annoys those who have to live in the structure. We’d like the user interface to be more declarative. We’d like to be able to make some kinds of changes to the server without changing the interface. Or change the server without changing the database. Or the database without the server. Or change this file without having to change that file.</p><p>Initiating a design change is one of those classic problems that doesn’t yield to purely rational thought. The information necessary to make a rational initiation decision simply doesn’t exist when we decide:</p><p>• How long will it take?<br>• How much of the system will it touch?<br>• What kind of accidental breakage will we risk?<br>• How will the rest of the team react to the change?<br>• How much will the new design accelerate future features?<br>• What other design changes will be enabled or inhibited by this one?<br>• What other changes will we <em>not </em>be making because we’re making this one?</p><p>Only experience &amp; judgement give you a chance of making good initiation decisions, both "this is the direction we are going" &amp; "now is when we start". Remember that you aren’t just making these decisions for yourself. Software design is an exercise in human relationships (no, I’m not going to keep saying that).</p><p>I won’t say much about particular "this is the direction we are going" decisions. I’ll talk about them in principle, but I trust you to figure the details out. In my experience "now is when we start" is the more fraught decisions.</p><p>You might be making a design change too soon if:</p><ul><li><p>You haven’t yet experienced the coupling you are trying to avoid. Leaving a good design trick in your Bag of Design Tricks until later is a subtle but valuable skill for the Empirical Software Designer.</p></li><li><p>You are in one of those rare periods where the cost of delaying features is extremely high (e.g. coming up to a critical trade show).</p></li><li><p>You aren’t sure which of several directions of change will pay off most. (Best to experiment briefly with all of them.)</p></li></ul><p>(There’s a flip side, which is realizing that you waited too long. Not much to be done about that except making a note for next time.)</p><p>Call your shot. Announce what you intend to do. Don’t change the design in secret. (You can experiment in secret if necessary, but even that’s better as a team sport.) Software design is, you all know this line by now, an exercise is human relationships. Build trust by calling your shot.</p><p>Technically, the first thing to do is establish a parallel. This design change is going to go to production in many tiny pieces. You need to create a place for that to happen safely.</p><p>For instance, if you’re debuting a new API, introduce the new API:</p><pre><code><code>  OldAPI
    function operation()
</code></code></pre><pre><code><code>  NewAPI
    function newOperation()
      OldAPI.operation()
</code></code></pre><p>That change should be completely safe, so push it to production just to be sure. (Thanks, Timothy Fitz!)</p><p>Duplicate the tests for the operation in the old API. They should all work. Push them to production too.</p><p>Now use the new API:</p><pre><code><code>  ...NewAPI.newOperation()...
</code></code></pre><p>You don’t need to use it everywhere at once. Just one usage will validate the change you’re making. Remember, you’re being all empirical &amp; stuff.</p><p>What do you do if you have fancy (well, I’d say "essential", but folks seem to disagree) refactoring tools that enable you to change all the call sites at once? Maybe something like an abstract syntax tree rewriter? I’m shrugging here. Does it seem perfectly safe to change all the call sites at once? Then try it. Big diffs can be small diffs if they only make one change in many places.</p><h2><strong>Sustaining</strong></h2><p>Now we have a design change proven to be useful in our system. Every time you need to change an element using the old design, convert it to the new design before changing it. Tidy first. Make the conversion a separate diff. If you have created a solid parallel, conversion should be a small risk.</p><p>The complaint I hear over &amp; over is, "They’ll never give us the time to improve the design. That’s why we <em>have </em>to take a disruptive pause." Empirical Software Design turns this statement around. Under what conditions would it be normal, accepted, even expected to invest in design roughly continuously?</p><ul><li><p>While there might be a temporary slowing in the delivery of features, there’s no noticeable pause.</p></li><li><p>If the cost of delay suddenly rises, we can defer this "optionality tax" temporarily.</p></li></ul><p>The whole process, the tradeoffs, the decisions are open, transparent, &amp; on the table. No secrets. No hiding.</p><p>Look, I too have worked on Wall Street. My first ever contract with a trader I explained my development process, with tests, refactoring, all that good stuff. They responded, "How much sooner can you deliver without all that crap?" I had the presence of mind to say, "It would take roughly twice as long." I got the contract. And ended up getting paid twice for it, but that’s another story.</p><p>What’s the point? Build trust, then remain trustworthy. Trustworthiness means features work reliably. Trustworthiness means a transparent process. Just because the process is transparent doesn’t mean it’s all up for negotiation. Chefs aren’t open to negotiating about wiping their knife every time they use it. We aren’t open to negotiation about whether we invest in structure. Exactly when? Sure. A little delay, to be made up later? Okay.</p><p>The first few on-demand conversions are likely to be, um, learning opportunities. That’s okay. Convert, then change. Convert, then change.</p><p>And spread the knowledge around. Offer to help the next person who comes across a conversion opportunity. Pretty soon conversions will become routine. There will be a few tricky exceptions. If a tricky example is going to delay you too much, put it on a list &amp; make the change anyway.</p><p>The collective learning you’re accumulating will eventually lead to a breakthrough. "Oh, here’s how we could do a bunch of conversions at once." Great, as long as that doesn’t cause a noticeable pause in new features.</p><h2><strong>Finishing</strong></h2><p>In any big design conversion there is always a handful of tricky examples that don’t fit the schema you’ve developed. Or they may support code that just doesn’t need to change. You’re caught between ever decreasing motivation to convert the last few and ever increasing cost as the examples get trickier &amp; trickier. At the same time, retiring the old design is also valuable.</p><p>You’re going to have to exercise some judgement about when to finish a design change. Too soon &amp; you’ll have too many example to convert quickly. Too late &amp; you’ll be paying the cost of 2 designs longer than you need to.</p><p>Pick a moment where the cost of delay is relatively low (that is, the demand for features is not quite so immediate or intense as usual). "No more Angular!" Everybody pitch in &amp; convert the last few examples. Ring a bell every time an example is done.</p><p>Celebrate! You’ve made a big design change in small, safe steps. You’ve kept your customer advised &amp; nourished with new features all along.</p><h2><strong>Abandoning</strong></h2><p>So far we've finished all the design changes we've started. That doesn't always happen. Sometimes you start a design change thinking the new design will be better. The first few examples might mislead you. Now you have the old &amp; the new designs &amp; you don't want to do more conversions.</p><p>You don't have a good option at this point. You can either:</p><ul><li><p>Back out the design change. This will take time but leave the system in a simpler state. However, whatever motivated you to make the design change in the first place is still out there.</p></li><li><p>Leave both designs in place. This is ugly because everyone will need to know both the old &amp; new designs, &amp; recognize which one is at play in a particular feature.</p></li></ul><p>Lesser of evils. Whichever you choose, put that original design problem in the back of your mind &amp; look for a better solution some day. (I've cooked problems like this for years before having the unlocking insight.)</p><h2><strong>Conclusion</strong></h2><p>All of this management overhead is to deal with design changes that take too long. Also optimize your design thinking &amp; execution so more &amp; more design changes can happen atomically.</p>