<blockquote><p>What follows is NOT how <em>you</em> should <em>do</em> TDD. Take responsibility for the quality of your work however you choose, as long as you actually take responsibility.</p><p>What follows is my response to ‚ÄúTDD suckz dude because &lt;something that isn‚Äôt TDD&gt;‚Äù, a frequent example being, ‚Äú‚Ä¶because I hate writing all the tests before I write any code.‚Äù If you‚Äôre going to critique something, critique the actual thing.</p></blockquote><ol><li><p>Write a list of the test scenarios you want to cover</p></li><li><p>Turn exactly one item on the list into an actual, concrete, runnable test</p></li><li><p>Change the code to make the test (&amp; all previous tests) pass (adding items to the list as you discover them)</p></li><li><p>Optionally refactor to improve the implementation design</p></li><li><p>Until the list is empty, go back to #2</p></li></ol><h2>Intro</h2><p><span class="mention-wrap" data-attrs="{&quot;name&quot;:&quot;Vic Wu&quot;,&quot;id&quot;:98011788,&quot;type&quot;:&quot;user&quot;,&quot;url&quot;:null,&quot;photo_url&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/18d627a8-7af1-4cc7-baee-310afaadffba_200x199.jpeg&quot;,&quot;uuid&quot;:&quot;ca469093-a5dd-4c11-a1b8-ac520db7eecc&quot;}" data-component-name="MentionToDOM"></span> summarized this post graphically:</p><div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!1sX4!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!1sX4!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 424w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 848w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg" width="1456" height="978" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:978,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;diagram&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="diagram" title="diagram" srcset="https://substackcdn.com/image/fetch/$s_!1sX4!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 424w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 848w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!1sX4!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7491e124-9e22-4e55-b03b-68d76316dcba_1602x1076.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></button></div></div></div></a></figure></div><p>In my recent round of TDD clarifications, one surprising experience is that folks out there don‚Äôt agree on the definition of TDD. I made it as clear as possible in my book. I thought it was clear. Nope. My bad.</p><p>If you‚Äôre doing something different than the following workflow &amp; it works for you, congratulations! It‚Äôs not Canon TDD, but who cares? There‚Äôs no gold star for following these steps exactly.</p><p>If you plan on critiquing TDD &amp; you‚Äôre not critiquing the following workflow, then you‚Äôre critiquing a strawman. That‚Äôs my point in spending some of the precious remaining seconds of my life writing this‚Äîforestalling strawmen. I‚Äôm not telling you how to program. I‚Äôm not charging for gold stars.</p><p>I try to be positive &amp; constructive as a habit. By necessity this post is going to be concise &amp; negative. ‚ÄúPeople get this wrong. Here‚Äôs the actual thing.‚Äù I don‚Äôt mean to critique someone‚Äôs workflow, but sharpen their understanding of Canon TDD.</p><h2>Overview</h2><p>Test-driven development is a programming workflow. A programmer needs to change the behavior of a system (which may be empty just now). TDD is intended to help the programmer create a new state of the system where:</p><ul><li><p>Everything that used to work still works.</p></li><li><p>The new behavior works as expected.</p></li><li><p>The system is ready for the next change.</p></li><li><p>The programmer &amp; their colleagues feel confident in the above points.</p></li></ul><h2>Interface/Implementation Split</h2><p>The first misunderstanding is that folks seem to lump all design together. There are two flavors:</p><ul><li><p>How a particular piece of behavior is invoked.</p></li><li><p>How the system implements that behavior.</p></li></ul><p>(When I was in school we called these logical &amp; physical design &amp; were told never to mix the two but nobody ever explained how. I had to figure that out later.)</p><h2>The Steps</h2><p>People are lousy computers. What follows looks like a computer program but it‚Äôs not. It‚Äôs written this way in an attempt to communicate effectively with people who are used to working with programs. I say ‚Äúattempt‚Äù because, as noted above, folks seem prone to saying, ‚ÄúTDD suckz, dude! I did &lt;something else entirely&gt; &amp; it failed.‚Äù</p><h3>1. Test List</h3><p>The initial step in TDD, given a system &amp; a desired change in behavior, is to list all the expected variants in the new behavior. ‚ÄúThere‚Äôs the basic case &amp; then what if this service times out &amp; what if the key isn‚Äôt in the database yet &amp;‚Ä¶‚Äù</p><p>This is analysis, but behavioral analysis. You‚Äôre thinking of all the different cases in which the behavior change should work. If you think of ways the behavior change shouldn‚Äôt break existing behavior, throw that in there too.</p><p>Mistake: mixing in implementation design decisions. Chill. There will be plenty of time to decide how the internals will look later. You‚Äôll do a better job of listing tests if that‚Äôs all you concentrate on. (If you need an implementation sketch in Sharpie on a napkin, go ahead, but you might not really need it. Experiment.)</p><p>Folks seem to have missed this step in the book. ‚ÄúTDD just launches into coding üöÄ. You‚Äôll never know when you‚Äôre done.‚Äù Nope.</p><h3>2. Write a Test</h3><p>One test. A really truly automated test, with setup &amp; invocation &amp; assertions (protip: trying working backwards from the assertions some time). It‚Äôs in the writing of this test that you‚Äôll begin making design decisions, but they are primarily interface decisions. Some implementation decisions may leak through, but you‚Äôll get better at avoiding this over time.</p><p>Mistake: write tests without assertions just to get code coverage.</p><p>Mistake: convert all the items on the Test List into concrete tests, then make them pass one at a time. What happens when making the first test pass causes you to reconsider a decision that affects all those speculative tests? Rework. What happens when you get to test #6 &amp; you haven‚Äôt seen anything pass yet? Depression and/or boredom.</p><p>Picking the next test is an important skill, &amp; one that only comes with experience. The order of the tests can significantly affect both the experience of programming &amp; the final result. (Open question: is code sensitive to initial conditions?)</p><h3>3. Make it Pass</h3><p>Now that you have a failing test, change the system so the test passes. </p><p>Mistake: delete assertions so the test pretends to pass. Make it pass for real.</p><p>Mistake: copying actual, computed values &amp; pasting them into the expected values of the test. That defeats double checking, which creates much of the validation value of TDD.</p><p>Mistake: mixing refactoring into making the test pass. Again with the ‚Äúwearing two hats‚Äù problem. Make it run, <em>then</em> make it right. Your brain will (eventually) thank you.</p><p>If in the process of going red to green you discover the need for a new test, add it to the Test List. If that test invalidates the work you‚Äôve done already (‚ÄúOh, no, there‚Äôs no way to handle the case of an empty folder.‚Äù), you need to decide whether to push on or start over (protip: start over but pick a different order to implement the tests). When the test passes, mark it off the list.</p><h3>4. Optionally Refactor</h3><p><em>Now</em> you get to make implementation design decisions.</p><p>Mistake: refactoring further than necessary for this session. It feels good to tidy stuff up. It can feel scary to face the next test, especially if it‚Äôs one you don‚Äôt know how to get to pass (I‚Äôm stuck on this on a side project right now).</p><p>Mistake: abstracting too soon. Duplication is a hint, not a command.</p><h3>5. Until the Test List is Empty, Go To 2.</h3><p>Keep testing &amp; coding until your fear for the behavior of the code has been transmuted into boredom.</p><div class="subscription-widget-wrap-editor" data-attrs="{&quot;url&quot;:&quot;https://tidyfirst.substack.com/subscribe?&quot;,&quot;text&quot;:&quot;Subscribe&quot;,&quot;language&quot;:&quot;en&quot;}" data-component-name="SubscribeWidgetToDOM"><div class="subscription-widget show-subscribe"><div class="preamble"><p class="cta-caption">Become a paying Tidy First? subscriber to improve your software design game. You‚Äôll receive more ideas &amp; concepts for software development, draft chapters of books in process, &amp; a weekly Thinkie, a habit of creative thought.</p></div><form class="subscription-widget-subscribe"><input type="email" class="email-input" name="email" placeholder="Type your email‚Ä¶" tabindex="-1"><input type="submit" class="button primary" value="Subscribe"><div class="fake-input-wrapper"><div class="fake-input"></div><div class="fake-button"></div></div></form></div></div>