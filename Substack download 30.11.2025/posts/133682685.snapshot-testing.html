<div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!KThj!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!KThj!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 424w, https://substackcdn.com/image/fetch/$s_!KThj!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 848w, https://substackcdn.com/image/fetch/$s_!KThj!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!KThj!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/ca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg" width="1456" height="1125" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/ca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1125,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:583680,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" srcset="https://substackcdn.com/image/fetch/$s_!KThj!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 424w, https://substackcdn.com/image/fetch/$s_!KThj!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 848w, https://substackcdn.com/image/fetch/$s_!KThj!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 1272w, https://substackcdn.com/image/fetch/$s_!KThj!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fca039209-7b8f-42fd-9c3a-ca44d430e431_2904x2244.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></button></div></div></div></a></figure></div><h2>Snapshot Testing</h2><p>Snapshot testing is:</p><ol><li><p>Run the code.</p></li><li><p>Record the output.</p></li><li><p>Create a test that checks for that output.</p></li></ol><p>Snapshot testing is the automated version of â€œwrite the stimulus part of the test, copy the actual result, &amp; paste it in as the expected resultsâ€.</p><h2>Test Desiderata</h2><p>The test desiderata is a list of 12 desirable properties of tests. Different styles of tests satisfy different properties. (There isnâ€™t one â€œgoodâ€ kind of test, there are different tradeoffs.) How does snapshot testing â€œscoreâ€ on the desiderata?</p><ul><li><p>Isolatedâ€”probably? Snapshot tests seem likely to not affect each othersâ€™ results. I suppose it depends on the style of code under test.</p></li><li><p>Composableâ€”likewise probably? You should be able to run a bunch of snapshot tests in any order &amp; get the same results. Kind of the corollary of isolation.</p></li><li><p>Deterministicâ€”yes, if the code under test is deterministic.</p></li><li><p>Specificâ€”depends on how much code is covered by the test. At least you will have a specific error, not just â€œshould have been non-nullâ€.</p></li><li><p>Behavioralâ€”ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ snapshot tests are definitely sensitive to changes in the behavior of the code under test.</p></li><li><p>Structure-insensitiveâ€”depends on what is returned &amp; checked for. Iâ€™ve seen snapshot tests (the manual kind) that checked for a whole huge object structure, much of which was irrelevant to the behavior being tested.</p></li><li><p>Fastâ€”likely yes, it seems?</p></li><li><p>Readableâ€”maybe, maybe not, depending on the complexity of the expected result.</p></li><li><p>Writableâ€”ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ this is absolutely where snapshot tests shine. If you kinda know you need a test but youâ€™re reluctant to take the time to write it, a snapshot test gives you some kind of a test quickly.</p></li><li><p>Automatedâ€”absolutely.</p></li><li><p>Predictiveâ€”it depends on how many &amp; which ones you write. If you have enough snapshot tests, â€œgreen means goâ€ (passing the tests means the code is safe to deploy).</p></li><li><p>Inspiringâ€”hereâ€™s where I wouldnâ€™t choose to rely only on snapshot tests. I <em>like</em> manually calculating the expected value to force myself to think through the problem 2 independent ways. If I come to the same answer, I gain confidence that the code is going to do what I hope it will do.</p></li></ul><h2>Conclusion</h2><p>Snapshot tests get high marks for being:</p><ul><li><p>Behavioral</p></li><li><p>Automated</p></li><li><p>Writable</p></li></ul><p>There are also other desirable properties out there, but these are a good start.</p>