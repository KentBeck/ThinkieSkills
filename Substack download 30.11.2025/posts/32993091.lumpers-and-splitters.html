<p>I spent some time last year (year before? who knows, it’s covid) refactoring <a href="https://excalidraw.com/">Excalidraw</a>. A friend, Christopher Chedeau, wrote it to give a hand-written look to drawings. Another friend, Pete Hunt, added support for distributed drawing. Others jumped in and added their favorite features. </p><p>The functionality was impressive. Usage was growing like crazy. The code was not to my taste. Excellent—they made it run, I’ll make it right. What a great way for me to practice big changes in small safe steps.</p><p>I nibbled away at the code, one little diff at a time. I made things slightly more cohesive by moving bits of code that changed in the same PRs so they were adjacent. Doing this showed me that <a href="https://github.com/excalidraw/excalidraw/blob/master/src/components/App.tsx">App.tsx</a> was doing several things at once—application lifecycle, swapping changes with remote drawings, handling user interface events.</p><p>I decided I’d extract</p>