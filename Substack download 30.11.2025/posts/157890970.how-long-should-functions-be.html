<p>If there’s one lesson I hope to get across in <em>Tidy Together</em> it is this—software is grown, not made.</p><p>When someone says, “Functions should be X-ish lines long,” they miss this fundamental truth. Regardless of how long functions start out, they’re going to grow. That growth is subject to natural laws, chief of which is, “The long get longer.”</p><p>Picking a number of lines ignores how functions actually grow. The question is not, “How long should functions be?”, it’s, “What is the distribution of function length?” Turning to data…</p><div><hr></div><p><em>Thanks to this week’s sponsor, Screenshot Bot. Arnold Noronha, the founder, was a student of mine at Facebook.</em></p><h2>Screenshot tests for mobile apps (and more)</h2><p>Want to know when something has accidentally changed in your mobile app? Screenshot tests occupy a unique point in the space of tests—easy to write, predictive, &amp; automated.</p><div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!SLzh!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!SLzh!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 424w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 848w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 1272w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/d0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png" width="1456" height="1037" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1037,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1492556,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:&quot;&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" title="" srcset="https://substackcdn.com/image/fetch/$s_!SLzh!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 424w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 848w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 1272w, https://substackcdn.com/image/fetch/$s_!SLzh!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0c984fb-89d8-42eb-a543-332f0ac71c83_3938x2805.png 1456w" sizes="100vw" loading="lazy" fetchpriority="high"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></button></div></div></div></a></figure></div><p>Use <a href="https://screenshotbot.io/tidyfirst">https://screenshotbot.io/tidyfirst</a> to signup to get 20% off your first year.</p><div><hr></div><h2><strong>JUnit 5 Lines/Function: Power Law Analysis</strong></h2><p>I chose JUnit 5 as my experimental subject, not for any particular reason except that I used to know the code well (turns out I don’t any more). I hope you’ll replicate the results below with your own code bases (especially if your results contradict mine—please LMK). Here is the distribution of lines/function:</p><p>1 line—1436 functions.<br>2—5491<br>3—1773<br>4—1163<br>…<br>74—1</p><div class="captioned-image-container"><figure><a class="image-link image2" target="_blank" href="https://substackcdn.com/image/fetch/$s_!0oc1!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!0oc1!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 424w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 848w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 1272w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png" width="356" height="219.9067599067599" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:530,&quot;width&quot;:858,&quot;resizeWidth&quot;:356,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Graph showing distribution of lines/function. Many small functions, a long tail of quite large functions.&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="Graph showing distribution of lines/function. Many small functions, a long tail of quite large functions." title="Graph showing distribution of lines/function. Many small functions, a long tail of quite large functions." srcset="https://substackcdn.com/image/fetch/$s_!0oc1!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 424w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 848w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 1272w, https://substackcdn.com/image/fetch/$s_!0oc1!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60a1f48e-5c74-4b58-b932-8666962edf61_858x530.png 1456w" sizes="100vw" loading="lazy"></picture><div></div></div></a></figure></div><p>Once I had the raw data, I fed it into <a href="http://isitapowerlaw.com">isitapowerlaw.com</a>. What follows is what came out.</p><blockquote><h3><strong>Distribution Statistics</strong></h3><p><strong>Total Observations: </strong>12,513</p><p><strong>Power Law Exponent (α): </strong>2.46</p><p><strong>R-squared: </strong>0.9600</p><p><strong>Range: </strong>1 - 74</p><p><strong>Mean Value: </strong>3.49</p><h3><strong>Power Law Interpretation</strong></h3><p>The data shows strong evidence for a power law distribution with exponent α ≈ 2.46. The high R² value (0.96) indicates the log-log plot is very close to linear, which is a key signature of power law behavior.</p><p>This type of distribution commonly appears in natural and human systems where there are "rich get richer" dynamics, scale-free networks, or self-organized criticality.</p><div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!aSPN!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!aSPN!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 424w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 848w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 1272w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 1456w" sizes="100vw"><img src="https://substack-post-media.s3.amazonaws.com/public/images/fa146242-1b38-4564-9638-acfb1ee46853_735x465.png" width="735" height="465" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fa146242-1b38-4564-9638-acfb1ee46853_735x465.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:465,&quot;width&quot;:735,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:34243,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://tidyfirst.substack.com/i/157890970?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png&quot;,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" title="" srcset="https://substackcdn.com/image/fetch/$s_!aSPN!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 424w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 848w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 1272w, https://substackcdn.com/image/fetch/$s_!aSPN!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa146242-1b38-4564-9638-acfb1ee46853_735x465.png 1456w" sizes="100vw" loading="lazy"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button><button tabindex="0" type="button" class="pencraft pc-reset pencraft icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></button></div></div></div></a></figure></div><h3><strong>It’s a Power Law</strong></h3><p>The log-log plot of the CCDF (Complementary Cumulative Distribution Function) shows a strong linear relationship (R² = 0.96), which is characteristic of power law distributions.</p><p>The estimated power law exponent α ≈ 2.46 falls within the typical range (2-3) observed in many real-world phenomena. This suggests the underlying process exhibits scale-free behavior where extreme events, while rare, occur more frequently than would be expected in a normal distribution.</p></blockquote><h2>Implications</h2><p>So, how long should functions be? Since it’s a power law distribution, the Central Limit Theorem doesn’t apply. The mean is going to increase the more samples we see. Put more plainly, the bigger the project, the bigger the average length.</p><p>How long, then? Lots of a short functions. A few long ones. The longest long one will keep getting bigger the more functions there are in the system.</p><p>Even though we can’t control whether or not function length follows a power law distribution, we can influence the slope of the distribution (the alpha mentioned in the analysis). Making the slope steeper means many more short functions &amp; much reduced length of the longest functions.</p><p>What causes the slope to get steeper? The only empirical result I’ve seen is <a href="https://s3.eu-central-1.amazonaws.com/org.geecon.webpage/2012.poznan/presentations/5_presentation.pdf">Keith Braithwaite’s study</a> showing that developing with TDD is correlated with a steeper slope. If you find other ways to increase the slope, or other correlations, please LMK.</p><p></p>